services:
  stt-api:
    # Build from your forked source (complete independence from original)
    build:
      context: ../../../STT-API-Server  # Path to your forked STT source
      dockerfile: Dockerfile
    restart: unless-stopped
    ports:
      - "8060:8000"
    volumes:
      - stt_models:/app/models
      - stt_cache:/app/cache
      - /home/agnes/voice-notes:/app/vnotes  # Host mount for voice notes access/backup
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
    labels:
      - "dockge.description=Custom STT API Server (jim0237 independent fork)"
      - "dockge.icon=headphones"
      - "dockge.note=Fully independent - modular frontend, multi-user support"

volumes:
  stt_models:
    name: stt-models
  stt_cache:
    name: stt-cache